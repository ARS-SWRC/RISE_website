<!DOCTYPE html>
<html  >
<head>
  
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="assets/images/ga-logo-128x128.png" type="image/x-icon">
  <meta name="description" content="">


    <title>Research Insights in Semiarid Ecosystems</title>
    <link rel="stylesheet" href="assets/web/assets/mobirise-icons2/mobirise2.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="assets/dropdown/css/style.css">
    <link rel="stylesheet" href="assets/socicon/css/styles.css">
    <link rel="stylesheet" href="assets/theme/css/style.css">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Jost:100,200,300,400,500,600,700,800,900,100i,200i,300i,400i,500i,600i,700i,800i,900i&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Jost:100,200,300,400,500,600,700,800,900,100i,200i,300i,400i,500i,600i,700i,800i,900i&display=swap"></noscript>
    <link rel="preload" as="style" href="assets/mobirise/css/mbr-additional.css"><link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y7PDKLSVTY"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-Y7PDKLSVTY');
    </script>

</head>
<body>
  
  <section data-bs-version="5.1" class="menu cid-s48OLK6784 no-tailwind" once="menu" id="menu1-h">
    
    <nav class="navbar navbar-dropdown navbar-fixed-top navbar-expand-lg">
        <div class="container">
            <div class="navbar-brand">
                <span class="navbar-logo">
                    <a href="index.html">
                        <img src="assets/images/ga-logo-460x147.png" alt="RISE Logo" style="height: 5rem;">
                    </a>
                </span>
                
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbarSupportedContent" data-bs-target="#navbarSupportedContent" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav nav-dropdown nav-right" data-app-modern-menu="true"><li class="nav-item"><a class="nav-link link text-black text-primary display-4" href="program.html">PROGRAM</a></li>
                    <li class="nav-item dropdown"><a class="nav-link link text-black text-primary dropdown-toggle display-4" href="https://www.tucson.ars.ag.gov/rise/2022/index.htm" aria-expanded="true" data-toggle="dropdown-submenu" data-bs-toggle="dropdown" data-bs-auto-close="outside">PAST SYMPOSIA</a><div class="dropdown-menu" aria-labelledby="dropdown-981"><div class="dropdown"><a class="text-black text-primary dropdown-item dropdown-toggle display-4" href="2004.html" data-toggle="dropdown-submenu" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">2004-2009</a><div class="dropdown-menu dropdown-submenu" aria-labelledby="dropdown-909"><a class="text-black text-primary show dropdown-item display-4" href="2004.html">2004</a><a class="text-black text-primary show dropdown-item display-4" href="2005.html">2005</a><a class="text-black text-primary show dropdown-item display-4" href="2006.html">2006</a><a class="text-black text-primary show dropdown-item display-4" href="2007.html">2007</a><a class="text-black text-primary show dropdown-item display-4" href="2008.html">2008</a><a class="text-black text-primary show dropdown-item display-4" href="2009.html">2009</a></div></div><div class="dropdown"><a class="text-black text-primary dropdown-item dropdown-toggle display-4" href="2005.html" data-toggle="dropdown-submenu" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">2010-2019</a><div class="dropdown-menu dropdown-submenu" aria-labelledby="dropdown-622"><a class="text-black text-primary show dropdown-item display-4" href="2010.html">2010<br></a><a class="text-black text-primary show dropdown-item display-4" href="2011.html">2011<br></a><a class="text-black text-primary show dropdown-item display-4" href="2012.html">2012<br></a><a class="text-black text-primary show dropdown-item display-4" href="2013.html">2013<br></a><a class="text-black text-primary show dropdown-item display-4" href="2014.html">2014<br></a><a class="text-black text-primary show dropdown-item display-4" href="2015.html">2015<br></a><a class="text-black text-primary show dropdown-item display-4" href="2016.html">2016<br></a><a class="text-black text-primary show dropdown-item display-4" href="2017.html">2017<br></a><a class="text-black text-primary show dropdown-item display-4" href="2018.html">2018<br></a><a class="text-black text-primary show dropdown-item display-4" href="2019.html">2019<br></a></div></div><div class="dropdown"><a class="text-black text-primary dropdown-item dropdown-toggle display-4" href="2006.html" data-toggle="dropdown-submenu" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">2021-2023</a><div class="dropdown-menu dropdown-submenu" aria-labelledby="dropdown-675"><a class="text-black text-primary show dropdown-item display-4" href="2021.html">2021</a><a class="text-black text-primary show dropdown-item display-4" href="2022.html">2022</a><a class="text-black text-primary show dropdown-item display-4" href="2023.html">2023</a></div></div></div></li><li class="nav-item"><a class="nav-link link text-black show text-primary display-4" href="pubsearch.html">SEARCH PRESENTATIONS</a></li></ul>
                
                
            </div>
        </div>
    </nav>

</section>


<section data-bs-version="5.1" class="features10 cid-tL9gkKFls2" id="features10-11">
    <!---->
    
    <div class="container">
        <div class="w-full max-w-4xl mx-auto p-4 md:p-8">
        <div class="bg-white rounded-xl shadow-2xl overflow-hidden">
            <div class="md:flex" style="display:flex; width100%;">
                <!-- Form Section -->
                <div class="w-full md:w-1/3 bg-gray-50 p-6 md:p-8 border-r border-gray-200" style="flex:3">
                    <h1 class="text-2xl font-bold text-gray-700">Publications/Poster Search</h1>
                    <p class="text-gray-600 mt-2 mb-6">Select field to search for and search Term.</p>
                    
                    <form id="airtableForm" class="space-y-4">
                        <div>
                            <label for="apiKey" class="form-label" style="display: none;">API Key</label>
                            <input type="password" id="apiKey" class="form-input" style="display: none;" placeholder="key..." value="pat7xrvrGyNvp6jN5.9452a92846d4c714d27258f389c756f44bf021a3cdf42ac001c0b09fc99d3170"> 
                        </div>
                        <div>
                            <label for="baseId" class="form-label" style="display: none;">Base ID</label>
                            <input type="text" id="baseId" class="form-input" style="display: none;" placeholder="app..." value="appxlgxQYdi9VR7lM">
                        </div>
                        <div>
                            <label for="tableName" class="form-label" style="display: none;" >Table Name</label>
                            <input type="text" id="tableName" class="form-input" style="display: none;"  placeholder="e.g., 'Contacts'" value="Publications">
                        </div>
                        <div>
                                <label for="searchField" class="form-label">Field to Search</label>
                                <select id="searchField" class="form-input">
                                    <option value="Title" selected>Title</option>
                                    <option value="Author (from Key)">Author</option>
                                </select>
                        </div>
                        <div>
                            <label for="query" class="form-label">Search Term</label>
                            <input type="text" id="query" class="form-input" placeholder="e.g., 'John Doe'">
                        </div>
                        <div>
                            <label for="queryAll" class="form-label">Show All</label>
                            <input type="checkbox" id="queryAll" class="form-input">
                        </div>
                        <button type="submit" class="btn-primary" style="width:230px;height:30px;margin-top:30px;">
                            <span id="button-text">Search</span>
                            <span id="button-spinner" class="hidden">
                                <svg class="animate-spin h-5 w-5 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                            </span>
                        </button>
                    </form>
                </div>

                <!-- Results Section -->
                <div class="w-full md:w-2/3 p-6 md:p-8" style="flex:7">
                    <h2 class="text-xl font-bold text-gray-800">Results</h2>
                    <div id="status" class="mt-4 text-gray-600">Enter your details and click search to see results.</div>
                    <div id="results" class="mt-4 max-h-[60vh] overflow-y-auto pr-2">
                        <!-- Search results will be injected here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const form = document.getElementById('airtableForm');
        const resultsContainer = document.getElementById('results');
        const statusContainer = document.getElementById('status');
        const buttonText = document.getElementById('button-text');
        const buttonSpinner = document.getElementById('button-spinner');

        form.addEventListener('submit', async (event) => {
            event.preventDefault();
            
            // 1. Get user input
            const apiKey = document.getElementById('apiKey').value.trim();
            const baseId = document.getElementById('baseId').value.trim();
            const tableName = document.getElementById('tableName').value.trim();
            const searchField = document.getElementById('searchField').value.trim();
            const query = document.getElementById('query').value.trim();

            // 2. Basic validation
            if (!apiKey || !baseId || !tableName || !searchField || !query) {
                statusContainer.textContent = 'Error: Please fill in all fields.';
                statusContainer.className = 'mt-4 text-red-600 font-semibold';
                resultsContainer.innerHTML = '';
                return;
            }

            // 3. Show loading state
            resultsContainer.innerHTML = '';
            statusContainer.textContent = 'Searching...';
            statusContainer.className = 'mt-4 text-blue-600 font-semibold';
            buttonText.classList.add('hidden');
            buttonSpinner.classList.remove('hidden');
            form.querySelector('button').disabled = true;

            try {
                // 4. Construct the API request
                // We URL-encode the table name and the formula to handle spaces and special characters.
                const encodedTableName = encodeURIComponent(tableName);
                // This formula finds records where the search term appears anywhere in the specified field (case-insensitive).
                const formula = `SEARCH(LOWER("${query}"), LOWER({${searchField}}))`;
                const encodedFormula = encodeURIComponent(formula);
                
                url = `https://api.airtable.com/v0/${baseId}/${encodedTableName}?filterByFormula=${encodedFormula}`;

                if (document.getElementById('queryAll').checked){
                    url = `https://api.airtable.com/v0/${baseId}/${encodedTableName}`;
                }

                console.log(url);

                // 5. Make the fetch call to Airtable API
                const response = await fetch(url, {
                    headers: {
                        'Authorization': `Bearer ${apiKey}`
                    }
                });

                // 6. Handle the response
                // Specifically check for 404 error, which is common with wrong Base ID or Table Name.
                if (response.status === 404) {
                    throw new Error("Not Found (404). Please double-check your Base ID and Table Name. They are case-sensitive.");
                }

                const data = await response.json();

                if (!response.ok) {
                    // Airtable provides helpful error messages in the response body
                    const errorMessage = data.error?.message || `HTTP Error: ${response.status} - ${response.statusText}`;
                    throw new Error(errorMessage);
                }

                if (data.records && data.records.length > 0) {
                    statusContainer.textContent = `Found ${data.records.length} record(s).`;
                    statusContainer.className = 'mt-4 text-green-600 font-semibold';
                    renderResults(data.records);
                } else {
                    statusContainer.textContent = 'No records found matching your query.';
                    statusContainer.className = 'mt-4 text-gray-600';
                }

            } catch (error) {
                statusContainer.textContent = `Error: ${error.message}`;
                statusContainer.className = 'mt-4 text-red-600 font-semibold';
                console.error('Airtable API Error:', error);
            } finally {
                // 7. Reset loading state
                buttonText.classList.remove('hidden');
                buttonSpinner.classList.add('hidden');
                form.querySelector('button').disabled = false;
            }
        });

        function renderResults(records) {
            resultsContainer.innerHTML = ''; // Clear previous results
            records.forEach(record => {
                const card = document.createElement('div');
                card.className = 'result-card';
                
                let cardContent = ''; // `<h4 class="text-lg font-bold text-blue-700 mb-2">Title: ${record.id}</h3>`;
                
                // Display all fields from the record
                var i = 0;
                for (const field in record.fields) {
                    if(i == 1)
                        cardContent += `
                            <div>
                                <h5 class="result-field" style="font-weight:bold;display:inline;">${field}:</span>
                                <h5 class="result-value" style="display:inline;">${JSON.stringify(record.fields[field]).replace(/["\[\]]/g, '')}</span>
                            </div>
                        `;
                    else if (i==1 || i==2 || i==3 || i==5 || i == 6)
                        cardContent += `
                            <div>
                                <span class="result-field" style="font-weight:bold;">${field}:</span>
                                <span class="result-value">${JSON.stringify(record.fields[field]).replace(/["\[\]]/g, '')}</span>
                            </div>
                        `;
                    i++;
                }
                cardContent += "<br/>";
                
                card.innerHTML = cardContent;
                resultsContainer.appendChild(card);
            });
        }
    </script>
    </div>
</section>

<section data-bs-version="5.1" class="footer4 cid-tL9r2e8jwo" once="footers" id="footer4-13">
    <div class="container">
        <div class="row mbr-white">
            <div class="col-6 col-lg-3">
                <div class="media-wrap col-md-8 col-12">
                    <a href="#">
                        <img src="assets/images/ga-logo-invert-397x202.png" alt="Research Insights in Semiarid Ecosystems">
                    </a>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-3">
                <h5 class="mbr-section-subtitle mbr-fonts-style mb-2 display-7">
                    <strong>RISE Organizing Committee:</strong></h5>
                <p class="mbr-text mbr-fonts-style mb-4 display-4">Brett Blum, Phil Heilman, Mitch McClaran, Heather Throop (alphabetical)
                <br>
                <br><a href="mailto:bcb@arizona.edu" class="text-primary">bcb@arizona.edu</a>
                <br><a href="mailto:phil.heilman@usda.gov" class="text-primary">phil.heilman@usda.gov</a>
                <br><a href="mailto:mcclaran@u.arizona.edu" class="text-primary">mcclaran@u.arizona.edu</a>
                <br><a href="mailto:heather.throop@asu.edu" class="text-primary">heather.throop@asu.edu</a>&nbsp;<br></p>
                </div>
                <div class="col-12 col-md-6 col-lg-6">
                    <h5 class="mbr-section-subtitle mbr-fonts-style mb-2 display-7">
                        <strong>Acronyms:</strong></h5>
                    <ul class="list mbr-fonts-style display-4">
                        <li class="mbr-text item-wrap">AES: Arizona Experiment Station
                        <br>AIR: Arizona Institute for Resilience</li><li class="mbr-text item-wrap">ARS: Agricultural Research Service</li><li class="mbr-text item-wrap">NEON: National Ecological Observatory Network
                        </li><li class="mbr-text item-wrap">SAES: Southern Arizona Experiment Station
                        </li><li class="mbr-text item-wrap">SNRE: School of Natural Resources and the Environment<br>SRER: Santa Rita Experimental Range</li><li class="mbr-text item-wrap">SWRC: Southwest Watershed Research Center
                        </li><li class="mbr-text item-wrap">UA: University of Arizona<br>UO BIO: Univ Oklahoma School Biological Sciences</li><li class="mbr-text item-wrap">
                        </li><li class="mbr-text item-wrap">USDA: United States Department of Agriculture
                        <br>USGS: United States Geological Survey</li><li class="mbr-text item-wrap"><br></li>
                    </ul>
            </div>
        </div>
    </div>
</section>

<script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/smoothscroll/smooth-scroll.js"></script>
<script src="assets/ytplayer/index.js"></script>
<script src="assets/mbr-tabs/mbr-tabs.js"></script>
<script src="assets/dropdown/js/navbar-dropdown.js"></script>
<script src="assets/theme/js/script.js"></script>
  
</body>
</html>